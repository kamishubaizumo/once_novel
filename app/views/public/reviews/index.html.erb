<div class="mt-5 text-center">
<h2>【<%= @novel.title %>】の感想一覧</h2>
<p><%= link_to "感想数：#{@novel.reviews.count}", novel_reviews_path(@novel.id) %></p>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-6">

<!--感想記入-->
<%= form_with model: @review, url: novel_reviews_path, method: :post do |f| %>
  <%= f.label :comment,"感想を書く" %><br>
  <%= f.text_area :comment, autofocus: true, size: "50x5", class: "form-control" %>
  <%= f.submit "投稿", class: "btn btn-success mt-3" %>
<% end %>

<!--評価記入-->
<div id="star justify-content-left">
  <%= form_with model: @review, url: novel_reviews_path, method: :post do |f| %>
    <%= f.label :star_rate,'評価する', class:'col-md-3 col-form-label' %>
    <%= f.hidden_field :star_rate, id: :review %>
  <% end %>
</div>


<div id="star"></div>
<script>
  // scriptファイルをどのidの部分に配置するかを指定
  let elem = document.querySelector('#star');
  let opt = {
    size     : 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    scoreName: 'post[rate]',
    half: true,
    //星画像の指定などのオプションをここに記述,
   };
  raty(elem,opt);
</script>


<!--コメント一覧-->
<h4>感想一覧</h4>
<div class="row">
<% @novel.reviews.each do |review| %>
  <%= review.user.name %><br>
  <%= review.comment %><br>
  <%= review.star_rate %><br>
<% end %>
</div>


    </div>
  </div>
</div>
